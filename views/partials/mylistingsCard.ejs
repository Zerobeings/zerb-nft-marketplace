
<div class="flex flex-wrap justify-center items-center collection-view-card">
  <% if(listings.length > 0) {%>
    <% listings.forEach((listings,i) => {%> 
              <% const IDtoken = listings.asset.id; %>
              <div class="row row-cols-1 row-cols-md-3 mb-3 text-center justify-center items-center">
                <div class="col justify-center items-center">
                  <div class="card mb-4 rounded-3 shadow-sm justify-center items-center width-14rem">
                    <div class="card-body justify-center items-center">
                        <h2 class="font20">Token #
                        <% if (String(IDtoken).length > 6) {%>
                        <%=String(IDtoken).slice(0,5) %>...
                        <%} else {%>
                          <%=IDtoken%>
                          <%}%>
                        </h2>
                        <a href="/listingDetails/<%=listings.assetContractAddress%>/<%=IDtoken%>/" id="genericLoaderM">
                          
                          <%if (listings.asset.image.substr(listings.asset.image.length-4).toLowerCase() === ".png" 
                            || listings.asset.image.substr(listings.asset.image.length-4).toLowerCase() === ".svg"
                            || listings.asset.image.substr(listings.asset.image.length-4).toLowerCase() === ".jpeg"
                            || listings.asset.image.substr(listings.asset.image.length-4).toLowerCase() === ".jpg"
                            || listings.asset.image.substr(listings.asset.image.length-4).toLowerCase() === ".gif"
                            || listings.asset.image.indexOf(".", listings.asset.image.length-5) === -1){%>
                              <img class="items-center asyncImage NFTcardImg" src="/images/loading.png" data-src="<%=listings.asset.image%>"  alt="...">
                              <%} %>
                            
                              <%if (listings.asset.image.substr(listings.asset.image.length-4).toLowerCase() === ".wav" 
                              || listings.asset.image.substr(listings.asset.image.length-4).toLowerCase() === ".mp3" 
                              || listings.asset.image.substr(listings.asset.image.length-4).toLowerCase() === ".ogg"){%>
                                <audio class="NFTcardAudioImg" controls><source src="<%=listings.asset.image%>"></audio>
                                <%}%>
                           
                            <%if (listings.asset.image.substr(listings.asset.image.length-4).toLowerCase() === ".mp4"
                            || listings.asset.image.substr(listings.asset.image.length-4).toLowerCase() === ".webm"
                            || listings.asset.image.substr(listings.asset.image.length-4).toLowerCase() === ".ogg"){%>
                                <video class="details-video-nft" controls><source src="<%=listings.asset.image%>"></video>
                                <%}%>
                            <%if (listings.asset.image.substr(listings.asset.image.length-4).toLowerCase() === ".doc"
                            || listings.asset.image.substr(listings.asset.image.length-4).toLowerCase() === ".docx"
                            || listings.asset.image.substr(listings.asset.image.length-4).toLowerCase() === ".pdf"
                            || listings.asset.image.substr(listings.asset.image.length-4).toLowerCase() === ".txt"){%>
                                <iframe src="https://docs.google.com/gview?url=<%=listings.asset.image%>&embedded=true" width="75%" height="75%" frameborder="0"></iframe>
                                <%}%>


                        </a>
                      <div class="NFTcardInfo">
                        <a>Price: <%=listings.buyoutCurrencyValuePerToken.displayValue%> <%=listings.buyoutCurrencyValuePerToken.symbol%></a>
                        <br>
                        <% if(session.zerb) { %>
                          <%if((listings.sellerAddress).toLowerCase() === (session.zerb.account).toLowerCase()){%>
                            <%if(listings.type === 0){%>
                              <a id="assetContractAddress<%=i%>" class="hidden"><%=listings.assetContractAddress%></a>
                              <a id="directListingId<%=i%>" class="hidden"><%=listings.id%></a>
                            <button id="canceldirectlisting" class="buttonlogout">Cancel Listing</button>
                            <%}%>
                            <%if(listings.type === 1){%>
                              <a id="addressClose<%=i%>" class="hidden"><%=session.zerb.account%></a>
                              <a id="auctionListingId<%=i%>" class="hidden"><%=listings.id%></a>
                              <button type="submit" id="closeAuction" class="buttonlogout">Close Auction</button>
                              <%}%>
                            <div class="collection-info-icons">
                              <a target="_blank" href="https://gateway.ipfscdn.io/ipfs/QmbAgC8YwY36n8H2kuvSWsRisxDZ15QZw3xGZyk9aDvcv7/marketplace.html?contract=0xd89EFD429668036580844701F2A50eF7B48FE493&chain=%7B%22name%22%3A%22Ethereum+Mainnet%22%2C%22chain%22%3A%22ETH%22%2C%22rpc%22%3A%5B%22https%3A%2F%2Fethereum.rpc.thirdweb.com%2F5a9bc94b87f7cbbbfbbc234bf1e07f0adf5f3cf3012c9f26f9fc9820d64df93a%22%5D%2C%22nativeCurrency%22%3A%7B%22name%22%3A%22Ether%22%2C%22symbol%22%3A%22ETH%22%2C%22decimals%22%3A18%7D%2C%22shortName%22%3A%22eth%22%2C%22chainId%22%3A1%2C%22testnet%22%3Afalse%2C%22slug%22%3A%22ethereum%22%7D&listingId=<%=listings.id%>&theme=dark&primaryColor=blue&secondaryColor=blue"><i class="fa-solid fa-globe ipfs-website-link"></i></a>
                              <div class="tooltip">
                                    <a id="embedBtn">
                                <i class="fa-solid fa-code embed-code"></i>
                                <code class="hidden" id="embeded<%=i%>"><iframe
                                  src="https://gateway.ipfscdn.io/ipfs/QmbAgC8YwY36n8H2kuvSWsRisxDZ15QZw3xGZyk9aDvcv7/marketplace.html?contract=0xd89EFD429668036580844701F2A50eF7B48FE493&chain=%7B%22name%22%3A%22Ethereum+Mainnet%22%2C%22chain%22%3A%22ETH%22%2C%22rpc%22%3A%5B%22https%3A%2F%2Fethereum.rpc.thirdweb.com%2F5a9bc94b87f7cbbbfbbc234bf1e07f0adf5f3cf3012c9f26f9fc9820d64df93a%22%5D%2C%22nativeCurrency%22%3A%7B%22name%22%3A%22Ether%22%2C%22symbol%22%3A%22ETH%22%2C%22decimals%22%3A18%7D%2C%22shortName%22%3A%22eth%22%2C%22chainId%22%3A1%2C%22testnet%22%3Afalse%2C%22slug%22%3A%22ethereum%22%7D&listingId=<%=listings.id%>&theme=dark&primaryColor=blue&secondaryColor=blue"
                                  width="600px"
                                  height="600px"
                                  frameborder="0"
                                  ></iframe></code>
                                    <span class="tooltiptext" id="embedWeb<%=i%>">Copy iframe code</span>
                                </a>
                              </div>
                            </div>  
                          <%}%>
                        <%} else if(session.guest){%>
                          <%if((listings.sellerAddress).toLowerCase() === (session.guest.account).toLowerCase()){%>
                            <%if(listings.type === 0){%>
                              <a id="assetContractAddress<%=i%>" class="hidden"><%=listings.assetContractAddress%></a>
                              <a id="directListingId<%=i%>" class="hidden"><%=listings.id%></a>
                            <button id="canceldirectlisting" class="buttonlogout">Cancel Listing</button>
                            <%}%>
                            <%if(listings.type === 1){%>
                              <a id="addressClose<%=i%>" class="hidden"><%=session.guest.account%></a>
                              <a id="auctionListingId<%=i%>" class="hidden"><%=listings.id%></a>
                              <button type="submit" id="closeAuction" class="closeauction">Close Auction</button>
                              <%}%>
                            <div class="collection-info-icons">
                              <a target="_blank" href="https://gateway.ipfscdn.io/ipfs/QmbAgC8YwY36n8H2kuvSWsRisxDZ15QZw3xGZyk9aDvcv7/marketplace.html?contract=0xd89EFD429668036580844701F2A50eF7B48FE493&chain=%7B%22name%22%3A%22Ethereum+Mainnet%22%2C%22chain%22%3A%22ETH%22%2C%22rpc%22%3A%5B%22https%3A%2F%2Fethereum.rpc.thirdweb.com%2F5a9bc94b87f7cbbbfbbc234bf1e07f0adf5f3cf3012c9f26f9fc9820d64df93a%22%5D%2C%22nativeCurrency%22%3A%7B%22name%22%3A%22Ether%22%2C%22symbol%22%3A%22ETH%22%2C%22decimals%22%3A18%7D%2C%22shortName%22%3A%22eth%22%2C%22chainId%22%3A1%2C%22testnet%22%3Afalse%2C%22slug%22%3A%22ethereum%22%7D&listingId=<%=listings.id%>&theme=dark&primaryColor=blue&secondaryColor=blue"><i class="fa-solid fa-globe ipfs-website-link"></i></a>
                              <div class="tooltip">
                                    <a id="embedBtn">
                                <i class="fa-solid fa-code embed-code"></i>
                                <code class="hidden" id="embeded<%=i%>"><iframe
                                  src="https://gateway.ipfscdn.io/ipfs/QmbAgC8YwY36n8H2kuvSWsRisxDZ15QZw3xGZyk9aDvcv7/marketplace.html?contract=0xd89EFD429668036580844701F2A50eF7B48FE493&chain=%7B%22name%22%3A%22Ethereum+Mainnet%22%2C%22chain%22%3A%22ETH%22%2C%22rpc%22%3A%5B%22https%3A%2F%2Fethereum.rpc.thirdweb.com%2F5a9bc94b87f7cbbbfbbc234bf1e07f0adf5f3cf3012c9f26f9fc9820d64df93a%22%5D%2C%22nativeCurrency%22%3A%7B%22name%22%3A%22Ether%22%2C%22symbol%22%3A%22ETH%22%2C%22decimals%22%3A18%7D%2C%22shortName%22%3A%22eth%22%2C%22chainId%22%3A1%2C%22testnet%22%3Afalse%2C%22slug%22%3A%22ethereum%22%7D&listingId=<%=listings.id%>&theme=dark&primaryColor=blue&secondaryColor=blue"
                                  width="600px"
                                  height="600px"
                                  frameborder="0"
                                  ></iframe></code>
                                    <span class="tooltiptext" id="embedWeb<%=i%>">Copy iframe code</span>
                                </a>
                              </div>
                            </div>  
                          <%}%>
                        <%} else if(session.tinydinos){%>
                          <%if((listings.sellerAddress).toLowerCase() === (session.tinydinos.account).toLowerCase()){%>
                           <%if(listings.type === 0){%>
                              <a id="assetContractAddress<%=i%>" class="hidden"><%=listings.assetContractAddress%></a>
                              <a id="directListingId<%=i%>" class="hidden"><%=listings.id%></a>
                            <button id="canceldirectlisting" class="buttonlogout">Cancel Listing</button>
                            <%}%>
                            <%if(listings.type === 1){%>
                              <a id="addressClose<%=i%>" class="hidden"><%=session.tinydinos.account%></a>
                              <a id="auctionListingId<%=i%>" class="hidden"><%=listings.id%></a>
                              <button type="submit" id="closeAuction" class="closeauction">Close Auction</button>
                            <%}%>
                            <div class="collection-info-icons">
                              <a target="_blank" href="https://gateway.ipfscdn.io/ipfs/QmbAgC8YwY36n8H2kuvSWsRisxDZ15QZw3xGZyk9aDvcv7/marketplace.html?contract=0xd89EFD429668036580844701F2A50eF7B48FE493&chain=%7B%22name%22%3A%22Ethereum+Mainnet%22%2C%22chain%22%3A%22ETH%22%2C%22rpc%22%3A%5B%22https%3A%2F%2Fethereum.rpc.thirdweb.com%2F5a9bc94b87f7cbbbfbbc234bf1e07f0adf5f3cf3012c9f26f9fc9820d64df93a%22%5D%2C%22nativeCurrency%22%3A%7B%22name%22%3A%22Ether%22%2C%22symbol%22%3A%22ETH%22%2C%22decimals%22%3A18%7D%2C%22shortName%22%3A%22eth%22%2C%22chainId%22%3A1%2C%22testnet%22%3Afalse%2C%22slug%22%3A%22ethereum%22%7D&listingId=<%=listings.id%>&theme=dark&primaryColor=blue&secondaryColor=blue"><i class="fa-solid fa-globe ipfs-website-link"></i></a>
                              <div class="tooltip">
                                    <a id="embedBtn">
                                <i class="fa-solid fa-code embed-code"></i>
                                <code class="hidden" id="embeded<%=i%>"><iframe
                                  src="https://gateway.ipfscdn.io/ipfs/QmbAgC8YwY36n8H2kuvSWsRisxDZ15QZw3xGZyk9aDvcv7/marketplace.html?contract=0xd89EFD429668036580844701F2A50eF7B48FE493&chain=%7B%22name%22%3A%22Ethereum+Mainnet%22%2C%22chain%22%3A%22ETH%22%2C%22rpc%22%3A%5B%22https%3A%2F%2Fethereum.rpc.thirdweb.com%2F5a9bc94b87f7cbbbfbbc234bf1e07f0adf5f3cf3012c9f26f9fc9820d64df93a%22%5D%2C%22nativeCurrency%22%3A%7B%22name%22%3A%22Ether%22%2C%22symbol%22%3A%22ETH%22%2C%22decimals%22%3A18%7D%2C%22shortName%22%3A%22eth%22%2C%22chainId%22%3A1%2C%22testnet%22%3Afalse%2C%22slug%22%3A%22ethereum%22%7D&listingId=<%=listings.id%>&theme=dark&primaryColor=blue&secondaryColor=blue"
                                  width="600px"
                                  height="600px"
                                  frameborder="0"
                                  ></iframe></code>
                                    <span class="tooltiptext" id="embedWeb<%=i%>">Copy iframe code</span>
                                </a>
                              </div>
                            </div>  
                          <%}%>
                        <%} else if(session.freshfrogsNFT){%>
                          <%if((listings.sellerAddress).toLowerCase() === (session.freshfrogsNFT.account).toLowerCase()){%>
                           <%if(listings.type === 0){%>
                              <a id="assetContractAddress<%=i%>" class="hidden"><%=listings.assetContractAddress%></a>
                              <a id="directListingId<%=i%>" class="hidden"><%=listings.id%></a>
                            <button id="canceldirectlisting" class="buttonlogout">Cancel Listing</button>
                            <%}%>
                            <%if(listings.type === 1){%>
                              <a id="addressClose<%=i%>" class="hidden"><%=session.freshfrogsNFT.account%></a>
                              <a id="auctionListingId<%=i%>" class="hidden"><%=listings.id%></a>
                              <button type="submit" id="closeAuction" class="closeauction">Close Auction</button>
                            <%}%>
                            <div class="collection-info-icons">
                              <a target="_blank" href="https://gateway.ipfscdn.io/ipfs/QmbAgC8YwY36n8H2kuvSWsRisxDZ15QZw3xGZyk9aDvcv7/marketplace.html?contract=0xd89EFD429668036580844701F2A50eF7B48FE493&chain=%7B%22name%22%3A%22Ethereum+Mainnet%22%2C%22chain%22%3A%22ETH%22%2C%22rpc%22%3A%5B%22https%3A%2F%2Fethereum.rpc.thirdweb.com%2F5a9bc94b87f7cbbbfbbc234bf1e07f0adf5f3cf3012c9f26f9fc9820d64df93a%22%5D%2C%22nativeCurrency%22%3A%7B%22name%22%3A%22Ether%22%2C%22symbol%22%3A%22ETH%22%2C%22decimals%22%3A18%7D%2C%22shortName%22%3A%22eth%22%2C%22chainId%22%3A1%2C%22testnet%22%3Afalse%2C%22slug%22%3A%22ethereum%22%7D&listingId=<%=listings.id%>&theme=dark&primaryColor=blue&secondaryColor=blue"><i class="fa-solid fa-globe ipfs-website-link"></i></a>
                              <div class="tooltip">
                                    <a id="embedBtn">
                                <i class="fa-solid fa-code embed-code"></i>
                                <code class="hidden" id="embeded<%=i%>"><iframe
                                  src="https://gateway.ipfscdn.io/ipfs/QmbAgC8YwY36n8H2kuvSWsRisxDZ15QZw3xGZyk9aDvcv7/marketplace.html?contract=0xd89EFD429668036580844701F2A50eF7B48FE493&chain=%7B%22name%22%3A%22Ethereum+Mainnet%22%2C%22chain%22%3A%22ETH%22%2C%22rpc%22%3A%5B%22https%3A%2F%2Fethereum.rpc.thirdweb.com%2F5a9bc94b87f7cbbbfbbc234bf1e07f0adf5f3cf3012c9f26f9fc9820d64df93a%22%5D%2C%22nativeCurrency%22%3A%7B%22name%22%3A%22Ether%22%2C%22symbol%22%3A%22ETH%22%2C%22decimals%22%3A18%7D%2C%22shortName%22%3A%22eth%22%2C%22chainId%22%3A1%2C%22testnet%22%3Afalse%2C%22slug%22%3A%22ethereum%22%7D&listingId=<%=listings.id%>&theme=dark&primaryColor=blue&secondaryColor=blue"
                                  width="600px"
                                  height="600px"
                                  frameborder="0"
                                  ></iframe></code>
                                    <span class="tooltiptext" id="embedWeb<%=i%>">Copy iframe code</span>
                                </a>
                              </div>
                            </div>  
                          <%}%>
                        <%}%>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
             
              <%})%>
        <%} else {%>
    
  
    <div class="flex flex-wrap justify-center items-center collection-view-card">
          <div class="row row-cols-1 row-cols-md-3 mb-3 text-center justify-center items-center">
            <div class="col justify-center items-center">
              <div class="card mb-4 rounded-3 shadow-sm justify-center items-center width-14rem">
                <div class="card-body justify-center items-center">
                      <h2 class="font20">No Listings</h2>
                      <a target="_blank"><img class="items-center NFTcardImg" src="/images/nolistings.png"  alt="..."></a>
                      <div class="NFTcardInfo">
                          <a id="token" class="NFT-id">Token ID: :[</a>
                      </div>
                </div>
              </div>
            </div>
          </div>
    </div>
    
    <%}%>
  
  </div>
  
  